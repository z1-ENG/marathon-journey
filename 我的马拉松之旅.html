<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的马拉松之旅</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .hero-section {
            position: relative;
            height: 60vh;
            min-height: 400px;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 40px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(0,0,0,0.3), rgba(0,0,0,0.1));
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }

        .hero-content {
            text-align: center;
            color: white;
        }

        .hero-content h1 {
            font-size: 3.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.5);
            animation: fadeInUp 1s ease-out;
        }

        .hero-content .subtitle {
            font-size: 1.4em;
            opacity: 0.95;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.5);
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .map-card {
            grid-column: span 4;
        }

        @media (max-width: 768px) {
            .map-card {
                grid-column: span 1;
            }
        }

        .photo-card:last-child {
            grid-column: 1 / -1;
        }


        .gallery-row-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .photo-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transition: transform 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .photo-card:hover {
            transform: translateY(-10px);
        }

        .photo-card img {
            width: 100%;
            height: auto;
            max-height: 400px;
            object-fit: contain;
            object-position: center;
        }

        .photo-info {
            padding: 20px;
        }

        .photo-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2c3e50;
        }

        .photo-description {
            color: #666;
            line-height: 1.5;
        }

        .featured-video {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .featured-video h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .featured-video video {
            max-width: 100%;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .achievements {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .achievements h2 {
            margin-bottom: 20px;
            color: #2c3e50;
        }

        .achievement-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .achievement-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            color: white;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2em;
            }
            
            .gallery {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="hero-section">
            <img src="首页.jpg" alt="马拉松封面" style="width: 100%; height: 100%; object-fit: cover; object-position: center 50%;">
            <div class="hero-overlay">
                <div class="hero-content">
                    <h1>Run The City</h1>
                    <p style="font-size: 1.8em; margin-top: 20px; opacity: 0.9;">答案在路上！</p>
                </div>
            </div>
        </div>

        <div class="gallery">
            <div class="photo-card">
                <img src="万州马拉松.jpg" alt="万州马拉松">
                <div class="photo-info">
                    <h3 class="photo-title">2025年3月30日 重庆万州环湖马拉松</h3>
                    <p class="photo-description">在万州的赛道上奔跑，感受长江三峡的壮丽风光，体验马拉松运动的无限魅力。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="越野赛.jpg" alt="越野挑战">
                <div class="photo-info">
                    <h3 class="photo-title">2025年9月20日 贵阳 天空之镜越野赛</h3>
                    <p class="photo-description">在崎岖的山路上奔跑，感受大自然的魅力，体验不一样的马拉松之旅。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="涪陵.jpg" alt="涪陵马拉松">
                <div class="photo-info">
                    <h3 class="photo-title">2025年10月26日 重庆涪陵白鹤梁半程马拉松</h3>
                    <p class="photo-description">在美丽的涪陵赛道上，感受乌江两岸的壮丽景色，享受奔跑带来的无限快乐。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="长嘉汇.jpg" alt="长嘉汇">
                <div class="photo-info">
                    <h3 class="photo-title">2025年11月2日 重庆长嘉汇半程马拉松</h3>
                    <p class="photo-description">在重庆美丽的长嘉汇赛道上奔跑，感受山城独特的城市风貌，体验半程马拉松的挑战与乐趣。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="忠县.jpg" alt="忠县马拉松">
                <div class="photo-info">
                    <h3 class="photo-title">2025年11月30日 重庆忠县马拉松暨第八届长江三峡马拉松</h3>
                    <p class="photo-description">在忠县的赛道上奔跑，感受长江三峡的壮丽风光，体验马拉松运动的无限魅力。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="江津卡片.jpg" alt="江津马拉松卡片" style="width: 100%; height: auto; max-height: 400px; object-fit: cover; border-radius: 10px;">
                <div class="photo-info">
                    <h3 class="photo-title">2025年11月9日 重庆江津东方爱情马拉松</h3>
                    <p class="photo-description">在江津美丽的赛道上奔跑，感受长江之滨的浪漫风情，体验爱情马拉松的独特魅力。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="咸丰卡片.jpg" alt="咸丰马拉松卡片" style="width: 100%; height: auto; max-height: 400px; object-fit: cover; border-radius: 10px;">
                <div class="photo-info">
                    <h3 class="photo-title">2025年6月29日 咸丰马拉松</h3>
                    <p class="photo-description">在咸丰的山间赛道上奔跑，感受土家族文化的独特魅力，体验马拉松运动的激情与活力。</p>
                </div>
            </div>

            <div class="photo-card">
                <img src="两江.jpg" alt="两江摇滚马拉松">
                <div class="photo-info">
                    <h3 class="photo-title">2025年10月18日 重庆两江摇滚半程马拉松</h3>
                    <p class="photo-description">在重庆两江新区赛道上奔跑，伴随着摇滚音乐的激情节奏，体验不一样的马拉松之旅。</p>
                </div>
            </div>

            <div class="photo-card map-card">
                <div style="position: relative; height: 500px; width: 100%;">
                    <div id="map" style="height: 100%; width: 100%;"></div>
                    <!-- 播放控制按钮 -->
                    <div style="position: absolute; top: 10px; right: 10px; z-index: 1000; background: white; padding: 8px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">
                        <button id="playBtn" onclick="togglePlay()" style="background: #667eea; color: white; border: none; padding: 8px 12px; border-radius: 4px; cursor: pointer; font-size: 14px;">
                            ▶ 播放
                        </button>
                        <div style="margin-top: 5px; font-size: 12px; color: #666;">
                            <span id="currentStep">1</span> / <span id="totalSteps">10</span>
                        </div>
                    </div>
                </div>
                <div class="photo-info">
                    <h3 class="photo-title">我的马拉松历程</h3>
                    <p class="photo-description">用脚步丈量城市，用地图记录足迹。每一座城市都有独特的风景，每一次奔跑都是难忘的旅程。</p>
                </div>
            </div>

            <div class="photo-card" style="display: flex; flex-direction: column; align-items: center; min-height: 750px;">
                <div style="display: flex; gap: 25px; margin-top: 20px; margin-bottom: 30px; justify-content: center; width: 100%;">
                    <img src="成绩.jpg" alt="比赛成绩" style="width: 450px; height: 450px; object-fit: contain; object-position: center top;">
                    <img src="奖牌.jpg" alt="奖牌" style="width: 450px; height: 450px; object-fit: contain; object-position: center top;">
                    <img src="号码布.jpg" alt="号码布" style="width: 450px; height: 450px; object-fit: contain; object-position: center top;">
                </div>
                <div class="photo-info" style="padding: 30px; width: 100%;">
                    <h3 class="photo-title">成绩与奖牌</h3>
                    <p class="photo-description">每一滴汗水都不会白流，每一次坚持都值得骄傲。成绩是最好的见证，奖牌是荣誉的象征。</p>
                    <div style="margin-top: 20px; display: flex; gap: 30px;">
                        <div style="flex: 1;">
                            <h4 style="color: #2c3e50; margin-bottom: 15px;">我的马拉松历程</h4>
                            <div id="marathon-list" style="line-height: 1.8; color: #555;">
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2024年12月8日 重庆江津东方爱情马拉松')">2024年12月8日 重庆江津东方爱情马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年3月23日 重庆垫江马拉松')">2025年3月23日 重庆垫江马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年3月30日 重庆万州环湖马拉松')">2025年3月30日 重庆万州环湖马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年5月11日 多彩贵州马拉松超级联赛（第二站）暨遵义马拉松')">2025年5月11日 多彩贵州马拉松超级联赛（第二站）暨遵义马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年6月29日 咸丰马拉松')">2025年6月29日 咸丰马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年9月20日 爽爽贵阳 天空之镜越野赛')">2025年9月20日 爽爽贵阳 天空之镜越野赛</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年10月18日 重庆两江摇滚半程马拉松')">2025年10月18日 重庆两江摇滚半程马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年10月26日 重庆涪陵白鹤梁半程马拉松')">2025年10月26日 重庆涪陵白鹤梁半程马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年11月2日 重庆长嘉汇半程马拉松')">2025年11月2日 重庆长嘉汇半程马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年11月9日 重庆江津东方爱情马拉松')">2025年11月9日 重庆江津东方爱情马拉松</p>
                                <p style="cursor: pointer; padding: 5px 0; border-bottom: 1px solid #eee;" onclick="showMarathonResult('2025年11月30日 重庆忠县马拉松暨第八届长江三峡马拉松')">2025年11月30日 重庆忠县马拉松暨第八届长江三峡马拉松</p>
                            </div>
                        </div>
                        <div style="flex: 1; border-left: 1px solid #eee; padding-left: 30px;">
                            <h4 style="color: #2c3e50; margin-bottom: 15px;">成绩详情</h4>
                            <div id="marathon-result" style="line-height: 1.8; color: #555;">
                                <p style="color: #999; font-style: italic;">点击左侧马拉松项目查看详细成绩</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="achievements">
            <h2>马拉松的意义</h2>
            <div class="achievement-grid">
                <div class="achievement-item">
                    <h4>挑战自我</h4>
                    <p>不断突破极限，超越昨天的自己</p>
                </div>
                <div class="achievement-item">
                    <h4>坚持不懈</h4>
                    <p>日复一日的训练，铸就今天的成就</p>
                </div>
                <div class="achievement-item">
                    <h4>享受过程</h4>
                    <p>在奔跑中感受生活的美好与激情</p>
                </div>
                <div class="achievement-item">
                    <h4>收获友谊</h4>
                    <p>与跑友同行，分享快乐与成长</p>
                </div>
            </div>
        </div>

        <div class="featured-video" style="display: none;">
            <video id="backgroundMusic" autoplay loop style="position: fixed; top: 0; left: 0; width: 1px; height: 1px; z-index: -1; opacity: 0; volume: 1.0;">
                <source src="音乐.mp4" type="video/mp4">
                您的浏览器不支持视频播放。
            </video>
        </div>

        <footer>
            <p>&copy; 2025 我的马拉松之旅 | 用脚步丈量人生</p>
        </footer>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // 初始化地图
        var map = L.map('map').setView([29.563, 106.551], 8);
        
        // 添加指定的地图图源
        L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/' + 'World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: '© Esri'
        }).addTo(map);
        
        // 添加马拉松城市标记
        var marathonCities = [
            {name: '2024年12月8日 重庆江津东方爱情马拉松', coords: [29.190, 106.260], image: '江津.jpg'},
            {name: '2025年3月23日 重庆垫江马拉松', coords: [30.325, 107.640], image: '垫江.jpg'},
            {name: '2025年3月30日 重庆万州环湖马拉松', coords: [30.817, 108.417], image: '万州马拉松.jpg'},
            {name: '2025年5月11日 多彩贵州马拉松超级联赛（第二站）暨遵义马拉松', coords: [27.738, 106.928], image: '遵义马拉松.jpg', video: '遵义马拉松.mp4'},
            {name: '2025年6月29日 咸丰马拉松', coords: [29.383, 109.150], image: '咸丰.jpg'},
            {name: '2025年9月20日 爽爽贵阳 天空之镜越野赛', coords: [26.647, 106.630], image: '越野赛.jpg'},
            {name: '2025年10月18日 重庆两江摇滚半程马拉松', coords: [29.620, 106.475], image: '两江.jpg'},
            {name: '2025年10月26日 重庆涪陵白鹤梁半程马拉松', coords: [29.583, 107.383], image: '涪陵.jpg'},
            {name: '2025年11月2日 重庆长嘉汇半程马拉松', coords: [29.563, 106.585], image: '长嘉汇.jpg'},
            {name: '2025年11月30日 重庆忠县马拉松暨第八届长江三峡马拉松', coords: [30.325, 107.640], image: '忠县.jpg'},
            {name: '2025年11月9日 重庆江津东方爱情马拉松', coords: [29.190, 106.260], image: '江津.jpg'}
        ];
        
        // 按时间顺序排列马拉松城市
        var orderedMarathonCities = [
            {name: '2024年12月8日 重庆江津东方爱情马拉松', coords: [29.190, 106.260], image: '江津.jpg'},
            {name: '2025年3月23日 重庆垫江马拉松', coords: [30.325, 107.640], image: '垫江.jpg'},
            {name: '2025年3月30日 重庆万州环湖马拉松', coords: [30.817, 108.417], image: '万州马拉松.jpg'},
            {name: '2025年5月11日 多彩贵州马拉松超级联赛（第二站）暨遵义马拉松', coords: [27.738, 106.928], image: '遵义马拉松.jpg', video: '遵义马拉松.mp4'},
            {name: '2025年6月29日 咸丰马拉松', coords: [29.383, 109.150], image: '咸丰.jpg'},
            {name: '2025年9月20日 爽爽贵阳 天空之镜越野赛', coords: [26.647, 106.630], image: '越野赛.jpg'},
            {name: '2025年10月18日 重庆两江摇滚半程马拉松', coords: [29.620, 106.475], image: '两江.jpg'},
            {name: '2025年10月26日 重庆涪陵白鹤梁半程马拉松', coords: [29.583, 107.383], image: '涪陵.jpg'},
            {name: '2025年11月2日 重庆长嘉汇半程马拉松', coords: [29.563, 106.585], image: '长嘉汇.jpg'},
            {name: '2025年11月9日 重庆江津东方爱情马拉松', coords: [29.190, 106.260], image: '江津.jpg'},
            {name: '2025年11月30日 重庆忠县马拉松暨第八届长江三峡马拉松', coords: [30.325, 107.640], image: '忠县.jpg'}
        ];
        
        // 存储所有标记点
        var markers = [];
        
        // 创建所有标记点
        orderedMarathonCities.forEach(function(city) {
            var marker = L.marker(city.coords).addTo(map);
            
            // 创建自定义弹出窗口内容
            var popupContent = '<div style="text-align: center; min-width: 250px;">' +
                              '<h4 style="margin: 0 0 10px 0; color: #2c3e50;">' + city.name + '</h4>';
            
            // 如果不是遵义马拉松，显示图片
            if (city.name.indexOf('遵义') === -1) {
                popupContent += '<img src="' + city.image + '" alt="' + city.name + '" style="width: 100%; max-width: 200px; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); margin-bottom: 10px;">';
            }
            
            // 如果有视频，添加视频播放器
            if (city.video) {
                popupContent += '<video controls style="width: 100%; max-width: 200px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">' +
                               '<source src="' + city.video + '" type="video/mp4">' +
                               '您的浏览器不支持视频播放。' +
                               '</video>';
            }
            
            popupContent += '</div>';
            
            marker.bindPopup(popupContent);
            markers.push(marker);
        });
        
        // 播放控制变量
        var isPlaying = false;
        var currentStep = 0;
        var playInterval;
        
        // 播放/暂停功能
        function togglePlay() {
            var playBtn = document.getElementById('playBtn');
            
            if (isPlaying) {
                // 暂停播放
                isPlaying = false;
                clearInterval(playInterval);
                playBtn.innerHTML = '▶ 播放';
                playBtn.style.background = '#667eea';
            } else {
                // 开始播放
                isPlaying = true;
                playBtn.innerHTML = '⏸ 暂停';
                playBtn.style.background = '#e74c3c';
                
                // 开始自动播放
                playNextStep();
            }
        }
        
        // 播放下一步
        function playNextStep() {
            if (!isPlaying) return;
            
            // 显示当前步骤
            showStep(currentStep);
            
            // 更新步骤计数器
            currentStep++;
            document.getElementById('currentStep').textContent = currentStep + 1;
            
            // 如果到达最后一步，停止播放
            if (currentStep >= orderedMarathonCities.length) {
                currentStep = 0;
                isPlaying = false;
                clearInterval(playInterval);
                document.getElementById('playBtn').innerHTML = '▶ 播放';
                document.getElementById('playBtn').style.background = '#667eea';
                return;
            }
            
            // 设置下一步的播放间隔（3秒）
            playInterval = setTimeout(playNextStep, 3000);
        }
        
        // 显示指定步骤
        function showStep(stepIndex) {
            if (stepIndex < 0 || stepIndex >= orderedMarathonCities.length) return;
            
            var city = orderedMarathonCities[stepIndex];
            
            // 移动地图到该位置，使用更小的缩放级别以确保弹出窗口内容完全显示
            map.setView(city.coords, 8);
            
            // 等待地图渲染完成后打开弹出窗口
            setTimeout(function() {
                markers[stepIndex].openPopup();
                
                // 添加高亮效果
                markers.forEach(function(marker, index) {
                    if (index === stepIndex) {
                        marker.setIcon(L.icon({
                            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
                            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                            iconSize: [25, 41],
                            iconAnchor: [12, 41],
                            popupAnchor: [1, -34],
                            shadowSize: [41, 41]
                        }));
                    } else {
                        marker.setIcon(L.icon({
                            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
                            shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png',
                            iconSize: [25, 41],
                            iconAnchor: [12, 41],
                            popupAnchor: [1, -34],
                            shadowSize: [41, 41]
                        }));
                    }
                });
            }, 500);
        }
        
        // 初始化步骤计数器
        document.getElementById('totalSteps').textContent = orderedMarathonCities.length;
        document.getElementById('currentStep').textContent = '1';

        // 显示马拉松成绩的函数
        function showMarathonResult(marathonName) {
            var resultDiv = document.getElementById('marathon-result');
            
            // 根据马拉松名称确定成绩图片
            var resultImage = '';
            if (marathonName.includes('2024年12月8日') && marathonName.includes('江津')) {
                resultImage = '2024江津成绩.jpg';
            } else if (marathonName.includes('2025年11月9日') && marathonName.includes('江津')) {
                resultImage = '2025江津成绩.jpg';
            } else if (marathonName.includes('垫江')) {
                resultImage = '垫江成绩.jpg';
            } else if (marathonName.includes('万州')) {
                resultImage = '万州成绩.jpg';
            } else if (marathonName.includes('遵义')) {
                resultImage = '遵义成绩.jpg';
            } else if (marathonName.includes('咸丰')) {
                resultImage = '咸丰成绩.jpg';
            } else if (marathonName.includes('贵阳')) {
                resultImage = '贵阳成绩.jpg';
            } else if (marathonName.includes('两江')) {
                resultImage = '两江成绩.jpg';
            } else if (marathonName.includes('涪陵')) {
                resultImage = '涪陵成绩.jpg';
            } else if (marathonName.includes('长嘉汇')) {
                resultImage = '长嘉汇成绩.jpg';
            } else if (marathonName.includes('忠县')) {
                resultImage = '忠县成绩.jpg';
            }
            
            if (resultImage) {
                resultDiv.innerHTML = '<h5 style="color: #2c3e50; margin-bottom: 15px;">' + marathonName + '</h5>' +
                                    '<div style="text-align: center;">' +
                                    '<img src="' + resultImage + '" alt="' + marathonName + '成绩" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.2);">' +
                                    '</div>';
            } else {
                resultDiv.innerHTML = '<p style="color: #999;">暂无该马拉松的成绩图片</p>';
            }
        }
        
        // 页面加载完成后自动播放背景音乐
        window.addEventListener('load', function() {
            var musicVideo = document.getElementById('backgroundMusic');
            if (musicVideo) {
                // 设置音量为最大值 (1.0) 且不静音
                musicVideo.volume = 1.0;
                musicVideo.muted = false;
                
                // 尝试播放音乐
                var playPromise = musicVideo.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(function() {
                        // 播放成功，再次确保音量和静音设置
                        musicVideo.volume = 1.0;
                        musicVideo.muted = false;
                        console.log('背景音乐开始播放，音量已设置为最大且不静音');
                    }).catch(function(error) {
                        // 播放失败，可能是浏览器阻止了自动播放
                        console.log('自动播放被阻止，需要用户交互');
                        // 添加用户交互后播放的逻辑
                        document.addEventListener('click', function playOnUserInteraction() {
                            musicVideo.volume = 1.0;
                            musicVideo.muted = false;
                            musicVideo.play();
                            document.removeEventListener('click', playOnUserInteraction);
                            console.log('用户交互后背景音乐开始播放');
                        }, { once: true });
                        
                        // 也尝试添加触摸事件支持
                        document.addEventListener('touchstart', function playOnTouch() {
                            musicVideo.volume = 1.0;
                            musicVideo.muted = false;
                            musicVideo.play();
                            document.removeEventListener('touchstart', playOnTouch);
                            console.log('触摸交互后背景音乐开始播放');
                        }, { once: true });
                    });
                }
            }
        });

        // 添加页面可见性变化时的处理
        document.addEventListener('visibilitychange', function() {
            var musicVideo = document.getElementById('backgroundMusic');
            if (musicVideo && !document.hidden) {
                // 页面重新可见时尝试恢复播放
                if (musicVideo.paused) {
                    musicVideo.play().then(function() {
                        console.log('页面重新可见后背景音乐恢复播放');
                    }).catch(function(error) {
                        console.log('页面重新可见后自动播放仍被阻止');
                    });
                }
            }
        });
    </script>
</body>
</html>